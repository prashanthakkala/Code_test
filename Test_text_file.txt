import fitz  # PyMuPDF

# Open the PDF file
pdf_file = "your_pdf_file.pdf"  # Replace with the actual file path
doc = fitz.open(pdf_file)

# Iterate over all the pages in the PDF
for page_num in range(doc.page_count):
    page = doc.load_page(page_num)  # Get the page
    annot_list = page.annots()  # Get list of annotations
    
    # If there are annotations (such as highlights) on the page
    if annot_list:
        for annot in annot_list:
            # Check if the annotation is a highlight (Type 8)
            if annot.type[0] == 8:
                # Set the highlight color to white (RGB: 1,1,1) to make it invisible
                annot.set_colors(stroke=None, fill=[1, 1, 1])  # Set highlight color to white
                annot.update()  # Apply the changes to the annotation

# Save the modified PDF as a new file
output_pdf = "output_no_highlight_color.pdf"
doc.save(output_pdf)

# Close the PDF document
doc.close()

print(f"PDF saved without highlight colors as {output_pdf}")
